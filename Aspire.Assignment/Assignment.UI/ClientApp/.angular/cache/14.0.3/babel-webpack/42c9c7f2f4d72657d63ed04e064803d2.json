{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { GoogleLoginProvider } from '@abacritt/angularx-social-login';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../_services/account.service\";\nimport * as i4 from \"../_services/alert.service\";\nimport * as i5 from \"@abacritt/angularx-social-login\";\nimport * as i6 from \"@angular/common\";\n\nfunction LoginComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.logInWithGoogle(\"Google\"));\n    });\n    i0.ɵɵtext(2, \" Google Login \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LoginComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, LoginComponent_div_12_div_1_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.username.errors.required);\n  }\n}\n\nfunction LoginComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, LoginComponent_div_17_div_1_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.f.password.errors.required);\n  }\n}\n\nfunction LoginComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 19);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport class LoginComponent {\n  constructor(formBuilder, route, router, accountService, alertService, authService, _ngZone) {\n    this.formBuilder = formBuilder;\n    this.route = route;\n    this.router = router;\n    this.accountService = accountService;\n    this.alertService = alertService;\n    this.authService = authService;\n    this._ngZone = _ngZone;\n    this.loading = false;\n    this.submitted = false;\n    debugger;\n    this.authService.authState.subscribe(user => {\n      console.log(user);\n      this.user = user;\n    });\n  }\n\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    }); //     window.onload = () => {\n    //       // @ts-ignore\n    //       google.accounts.id.initialize({\n    //         client_id: '69444274473-fkj187lq3sjvfvq6somuhrqjh74oiqpc.apps.googleusercontent.com',\n    //         callback: this.handleCredentialResponse.bind(this),\n    //         auto_select: false,\n    //         cancel_on_tap_outside: true\n    //       });\n    //       // @ts-ignore\n    //       google.accounts.id.renderButton(\n    //       // @ts-ignore\n    //       document.getElementById(\"buttonDiv\"),\n    //         { theme: \"outline\", size: \"large\", width: \"100%\" } \n    //       );\n    //       // @ts-ignore\n    //       google.accounts.id.prompt((notification: PromptMomentNotification) => {});\n    //     };\n    // }\n    // async handleCredentialResponse(response: CredentialResponse) {\n    //   this.accountService.LoginWithGoogle(response.credential).subscribe(\n    //     (x: any) => {\n    //       this._ngZone.run(() => {\n    //         this.router.navigate(['/logout']);\n    //       });\n    //     },\n    //     (error: any) => {\n    //       console.log(error);\n    //     }\n    //   );  \n  } // convenience getter for easy access to form fields\n\n\n  get f() {\n    return this.form.controls;\n  }\n\n  onSubmit() {\n    this.submitted = true; // reset alerts on submit\n\n    this.alertService.clear(); // stop here if form is invalid\n\n    if (this.form.invalid) {\n      return;\n    }\n\n    this.loading = true;\n    this.accountService.login(this.f.username.value, this.f.password.value) // .pipe(first())\n    .subscribe({\n      next: data => {\n        console.log('data', data);\n        this.RoleId = data.roleId;\n        this.authenticateUser(this.RoleId); // get return url from query parameters or default to home page\n\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n        this.router.navigateByUrl(returnUrl);\n      },\n      error: error => {\n        this.alertService.error(error);\n        this.loading = false;\n      }\n    });\n  }\n\n  signInWithGoogle() {\n    this.authService.signIn(GoogleLoginProvider.PROVIDER_ID).then(x => console.log(x));\n  }\n\n  signOut() {\n    this.authService.signOut();\n  }\n\n  logInWithGoogle(platform) {\n    debugger;\n    platform = GoogleLoginProvider.PROVIDER_ID; //Sign In and get user Info using authService that we just injected\n\n    this.authService.signIn(platform).then(response => {\n      //Get all user details\n      console.log(platform + ' logged in user data is= ', response); //Take the details we need and store in an array\n\n      this.userData.push({\n        provider: response.provider,\n        firstname: response.firstName,\n        lastname: response.lastName,\n        email: response.email\n      });\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  authenticateUser(RoleId) {\n    debugger;\n\n    if (RoleId == 1) {\n      this.router.navigate(['/adminDash']);\n    } else if (RoleId == 2) {\n      this.router.navigate(['/devDash']);\n    } else if (RoleId == 3) {\n      this.router.navigate(['/userDash']);\n    }\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AccountService), i0.ɵɵdirectiveInject(i4.AlertService), i0.ɵɵdirectiveInject(i5.SocialAuthService), i0.ɵɵdirectiveInject(i0.NgZone));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 24,\n  vars: 12,\n  consts: [[1, \"card\"], [1, \"card-header\"], [\"class\", \"navbar-nav ml-auto\", 4, \"ngIf\"], [\"id\", \"g_id_onload\", \"data-client_id\", \"69444274473-fkj187lq3sjvfvq6somuhrqjh74oiqpc.apps.googleusercontent.com\", \"data-context\", \"signin\", \"data-ux_mode\", \"popup\", \"data-login_uri\", \"http://localhost:4200/account/login\", \"data-auto_select\", \"true\", \"data-itp_support\", \"true\"], [\"data-type\", \"icon\", \"data-shape\", \"square\", \"data-theme\", \"outline\", \"data-text\", \"signin_with\", \"data-size\", \"large\", 1, \"g_id_signin\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"title\", \"Username\", \"type\", \"text\", \"formControlName\", \"username\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"title\", \"Password\", \"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\", 3, \"ngClass\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-1\", 4, \"ngIf\"], [\"routerLink\", \"../register\", 1, \"btn\", \"btn-link\"], [1, \"navbar-nav\", \"ml-auto\"], [3, \"click\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-1\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n      i0.ɵɵtext(2, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, LoginComponent_div_3_Template, 3, 0, \"div\", 2);\n      i0.ɵɵelement(4, \"div\", 3)(5, \"div\", 4);\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"form\", 6);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 8);\n      i0.ɵɵtext(10, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"input\", 9);\n      i0.ɵɵtemplate(12, LoginComponent_div_12_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 7)(14, \"label\", 8);\n      i0.ɵɵtext(15, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 11);\n      i0.ɵɵtemplate(17, LoginComponent_div_17_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\")(19, \"button\", 12);\n      i0.ɵɵtemplate(20, LoginComponent_span_20_Template, 1, 0, \"span\", 13);\n      i0.ɵɵtext(21, \" Login \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"a\", 14);\n      i0.ɵɵtext(23, \"Register\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.user);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, ctx.submitted && ctx.f.username.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.username.errors);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, ctx.submitted && ctx.f.password.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.password.errors);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n    }\n  },\n  dependencies: [i6.NgClass, i6.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i2.RouterLinkWithHref],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Validators","GoogleLoginProvider","i0","LoginComponent","constructor","formBuilder","route","router","accountService","alertService","authService","_ngZone","authState","subscribe","user","console","log","ngOnInit","form","group","username","required","password","f","controls","onSubmit","submitted","clear","invalid","loading","login","value","next","data","RoleId","roleId","authenticateUser","returnUrl","snapshot","queryParams","navigateByUrl","error","signInWithGoogle","signIn","PROVIDER_ID","then","x","signOut","logInWithGoogle","platform","response","userData","push","provider","firstname","firstName","lastname","lastName","email","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Aspire-Assignment\\Aspire.Assignment\\Assignment.UI\\ClientApp\\src\\app\\account\\login.component.ts","D:\\Aspire-Assignment\\Aspire.Assignment\\Assignment.UI\\ClientApp\\src\\app\\account\\login.component.html"],"sourcesContent":["import { Component, OnInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport { AccountService } from '../_services/account.service';\nimport { AlertService } from '../_services/alert.service';\nimport { SocialAuthService  } from '@abacritt/angularx-social-login';\nimport { SocialUser } from '@abacritt/angularx-social-login';\nimport { GoogleLoginProvider } from '@abacritt/angularx-social-login';\nimport { CredentialResponse, PromptMomentNotification } from 'google-one-tap';\nimport { User } from '../_models/user';\n\n\n@Component({ templateUrl: 'login.component.html' })\nexport class LoginComponent implements OnInit {\n    form!: FormGroup;\n    loading = false;\n    submitted = false;\n    user!: SocialUser; \n    RoleId! : number;\n    userData : User[];\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private route: ActivatedRoute,\n        private router: Router,\n        private accountService: AccountService,\n        private alertService: AlertService,\n        private authService: SocialAuthService,\n        private _ngZone: NgZone,\n    ) { \n      debugger;\n\t    this.authService.authState.subscribe((user: SocialUser) => {\n        console.log(user);\n        this.user = user;\n\t});\n    }\n\n    ngOnInit(): void {\n        this.form = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n\n    //     window.onload = () => {\n    //       // @ts-ignore\n    //       google.accounts.id.initialize({\n    //         client_id: '69444274473-fkj187lq3sjvfvq6somuhrqjh74oiqpc.apps.googleusercontent.com',\n    //         callback: this.handleCredentialResponse.bind(this),\n    //         auto_select: false,\n    //         cancel_on_tap_outside: true\n    //       });\n    //       // @ts-ignore\n    //       google.accounts.id.renderButton(\n    //       // @ts-ignore\n    //       document.getElementById(\"buttonDiv\"),\n    //         { theme: \"outline\", size: \"large\", width: \"100%\" } \n    //       );\n    //       // @ts-ignore\n    //       google.accounts.id.prompt((notification: PromptMomentNotification) => {});\n    //     };\n    // }\n\n    // async handleCredentialResponse(response: CredentialResponse) {\n    //   this.accountService.LoginWithGoogle(response.credential).subscribe(\n    //     (x: any) => {\n    //       this._ngZone.run(() => {\n    //         this.router.navigate(['/logout']);\n    //       });\n    //     },\n    //     (error: any) => {\n    //       console.log(error);\n    //     }\n    //   );  \n  }\n\n    // convenience getter for easy access to form fields\n    get f() { return this.form.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // reset alerts on submit\n        this.alertService.clear();\n\n        // stop here if form is invalid\n        if (this.form.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.accountService.login(this.f.username.value, this.f.password.value)\n           // .pipe(first())\n            .subscribe({\n                next: (data : any) => {\n                    console.log('data',data)\n                    this.RoleId = data.roleId;\n                    this.authenticateUser(this.RoleId);\n                    // get return url from query parameters or default to home page\n                    const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n                    this.router.navigateByUrl(returnUrl);\n                },\n                error: (error: any) => {\n                    this.alertService.error(error);\n                    this.loading = false;\n                }\n            });\n    }\n    signInWithGoogle(): void {\n    this.authService.signIn(GoogleLoginProvider.PROVIDER_ID).then((x: any) => console.log(x));\n  }\n\n    signOut(): void {\n    this.authService.signOut();\n    } \n\n    logInWithGoogle(platform: string): void {\n      debugger;\n      platform = GoogleLoginProvider.PROVIDER_ID;\n      //Sign In and get user Info using authService that we just injected\n         this.authService.signIn(platform).then(\n      (response) => {\n      //Get all user details\n           console.log(platform + ' logged in user data is= ' , response);\n      //Take the details we need and store in an array\n           this.userData.push({\n            provider: response.provider,\n             firstname: response.firstName,\n             lastname: response.lastName,\n             email: response.email\n           });\n       },\n       (error) => {\n         console.log(error);\n      }\n  )}\n\n\n    authenticateUser(RoleId : any){\n        debugger;\n        if(RoleId == 1){\n          this.router.navigate(['/adminDash']);\n        } else if(RoleId == 2){ \n          this.router.navigate(['/devDash']);\n        } else if(RoleId == 3){\n          this.router.navigate(['/userDash'])\n        }\n      }\n    \n}","\n<div class=\"card\">\n  <h4 class=\"card-header\">Login</h4>\n  <div class=\"navbar-nav ml-auto\" *ngIf=\"!user\">\n      <!-- <li class=\"nav-item\">\n        <a (click)=\"signInWithGoogle()\" class=\"nav-link\">Sign in with google</a>\n      </li> -->\n      <button (click)=\"logInWithGoogle('Google')\"> Google Login </button>\n    </div> \n\n    <script src=\"https://accounts.google.com/gsi/client\" async defer></script>\n    <div id=\"g_id_onload\"\n     data-client_id=\"69444274473-fkj187lq3sjvfvq6somuhrqjh74oiqpc.apps.googleusercontent.com\"\n     data-context=\"signin\"\n     data-ux_mode=\"popup\"\n     data-login_uri=\"http://localhost:4200/account/login\"\n     data-auto_select=\"true\"\n     data-itp_support=\"true\">\n</div>\n\n<div class=\"g_id_signin\"\n     data-type=\"icon\"\n     data-shape=\"square\"\n     data-theme=\"outline\"\n     data-text=\"signin_with\"\n     data-size=\"large\">\n</div>\n    <!-- <script>\n      function handleCredentialResponse(response) {\n        console.log(\"Encoded JWT ID token: \" + response.credential);\n      }\n      window.onload = function () {\n        google.accounts.id.initialize({\n          client_id: \"YOUR_GOOGLE_CLIENT_ID\",\n          callback: handleCredentialResponse\n        });\n        google.accounts.id.renderButton(\n          document.getElementById(\"buttonDiv\"),\n          { theme: \"outline\", size: \"large\" }  // customization attributes\n        );\n        google.accounts.id.prompt(); // also display the One Tap dialog\n      }\n  </script> -->\n  <div class=\"card-body\">\n      <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n          <div class=\"mb-3\">\n              <label class=\"form-label\">Username</label>\n              <input title=\"Username\" type=\"text\" formControlName=\"username\" class=\"form-control\" [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\n              <div *ngIf=\"submitted && f.username.errors\" class=\"invalid-feedback\">\n                  <div *ngIf=\"f.username.errors.required\">Username is required</div>\n              </div>\n          </div>\n          <div class=\"mb-3\">\n              <label class=\"form-label\">Password</label>\n              <input title=\"Password\" type=\"password\" formControlName=\"password\" class=\"form-control\" [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\n              <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\n                  <div *ngIf=\"f.password.errors.required\">Password is required</div>\n              </div>\n          </div>\n          <div>\n              <button type=\"submit\" [disabled]=\"loading\" class=\"btn btn-primary\">\n                  <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-1\"></span>\n                  Login\n              </button>\n              <a routerLink=\"../register\" class=\"btn btn-link\">Register</a>\n          </div>\n      </form>\n  </div>\n</div>\n\n<!-- <div class=\"tab-pane fade show active\" id=\"pills-login\" role=\"tabpanel\" aria-labelledby=\"tab-login\">\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <div class=\"text-center mb-3\">\n        <p>Sign in with:</p>\n\n       \n        <button type=\"button\" class=\"btn btn-secondary btn-floating mx-1\">\n            <i class=\"fab fa-google\"></i>\n          <a (click)=\"signInWithGoogle()\" class=\"nav-link\">  </a>\n        </button>\n        \n      </div>\n\n      <p class=\"text-center\">or:</p>\n      <div class=\"form-outline mb-4\">\n        <label class=\"form-label\">Username</label>\n        <input title=\"Username\" type=\"text\" formControlName=\"username\" class=\"form-control\" [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\n        <div *ngIf=\"submitted && f.username.errors\" class=\"invalid-feedback\">\n            <div *ngIf=\"f.username.errors.required\">Username is required</div>\n        </div>\n      </div>\n\n      <div class=\"form-outline mb-4\">\n        <label class=\"form-label\">Password</label>\n                <input title=\"Password\" type=\"text\" formControlName=\"password\" class=\"form-control\" [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\n                <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\n                    <div *ngIf=\"f.password.errors.required\">Password is required</div>\n                </div>\n      </div>\n\n      <button type=\"submit\" [disabled]=\"loading\" class=\"btn btn-primary btn-block mb-4\">\n        <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-1\"></span>\n        Sign in\n    </button>\n      <div class=\"text-center\">\n        <p>Not a member? <a routerLink=\"../register\">Register</a></p>\n      </div>\n    </form>\n  </div> -->"]},"metadata":{},"sourceType":"module"}